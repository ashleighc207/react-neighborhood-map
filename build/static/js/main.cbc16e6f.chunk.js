(this["webpackJsonpreact-neighborhood-project"]=this["webpackJsonpreact-neighborhood-project"]||[]).push([[0],{11:function(e,t,a){e.exports=a(20)},16:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n,r,s,o,i,c=a(0),l=a.n(c),u=a(9),p=a.n(u),m=a(1),h=a(2),d=a(4),f=a(3),v=(a(16),function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{ref:function(t){return e.mapContainer=t},role:"application"})}}]),a}(c.Component)),g=a(7),b=a(6),k=a.n(b),E=a(10),M=a.n(E),y=(a(18),"ZSPTQF2ZF05OMT3EYKCTCVOTLZ0SOS5CK55HEORQU0VG55NZ"),x="DQJT5J4TFN3MBG2FK1SPDUVZL5IPM2RMOWETL3FQWGGXJQLH",O="https://api.foursquare.com/v2",j=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={query:"",results:[],venues:[],markers:[],error:!1},e.newSearch=function(t){e.setState({query:t})},e.getVenueDetails=function(){e.state.venues.map((function(t){var a=t.id;return fetch("".concat(O,"/venues/").concat(a,"?client_id=").concat(y,"&client_secret=").concat(x,"&v=20180323")).then((function(e){return e.json()})).then((function(t){200===t.meta.code?(t.response.venue.bestPhoto||(t.response.venue.bestPhoto={prefix:"https://www.kiabrisa.com.br/wp-content/uploads/revslider/home5/placeholder-1200x500-",suffix:".png",width:100,height:100}),e.setState({venues:[].concat(Object(g.a)(e.state.venues),[t.response.venue]),results:[].concat(Object(g.a)(e.state.results),[t.response.venue])},(function(){e.props.initializeMarkers([t.response.venue])}))):e.setState({error:!0})})).catch((function(t){t&&(console.log("error:",t),e.setState({error:!0}))})),t}))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({venues:this.props.venues},(function(){e.getVenueDetails()}))}},{key:"render",value:function(){var e,t,a=this,n=this.state,r=n.query,s=n.results,o=n.markers,i=n.error;if(r){var c=new RegExp(k()(r),"i");e=s.filter((function(e){return c.test(e.name)}));var u=new RegExp(k()(r),"i");t=o.filter((function(e){return u.test(e._element.data)?e._element.classList.remove("display-none"):e._element.classList.add("display-none"),t}))}else e=s,t=o,this.state.markers.forEach((function(e){e._element.classList.remove("display-none")}));return e.sort(M()("name")),l.a.createElement("aside",{className:"sidebar-container"},l.a.createElement("input",{type:"text",id:"search",placeholder:"Search by name",className:"sidebar-search","aria-label":"search",value:r,onChange:function(e){return a.newSearch(e.target.value)}}),!i&&e.map((function(e){return l.a.createElement("section",{className:"venue-box",key:e.id},l.a.createElement("h2",{className:"venue-name",tabIndex:"0"},e.name),l.a.createElement("section",{className:"venue-sub-box"},l.a.createElement("img",{className:"venue-img",alt:e.name,src:e.bestPhoto.prefix+e.bestPhoto.width+"x"+e.bestPhoto.height+e.bestPhoto.suffix}),l.a.createElement("ul",{className:"venue-list"},l.a.createElement("li",{className:"venue-text"},e.categories[0].name),l.a.createElement("li",{className:"venue-text"},e.location.formattedAddress[0]),l.a.createElement("li",{className:"venue-text"},e.location.formattedAddress[1]))))})),i&&l.a.createElement("p",{className:"error-text"},"Oh no! There was an error getting the requested data from FourSquare. Please try again or report this error via the"," ",l.a.createElement("a",{href:"https://github.com/ashleighc207/react-neighborhood-map/issues"},"Github\xa0Repo.")))}}]),a}(c.Component),w=(a(19),[{id:"506a42efe4b03667d394e0e0"},{id:"4b041d71f964a520745122e3"}]),L=a(5),T=a.n(L),N=[];T.a.accessToken="pk.eyJ1IjoiYXNobGVpZ2hjMjA3IiwiYSI6ImNqa3dod254cjByOGUzcHBkbmpmendyN2EifQ.RzeAqtiFyTg92mZO5Y2XoA";var P=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).state={pizzaPlaces:w,venues:w,markers:[],error:!1},e.initializeMap=function(){return(o=new T.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v9",center:[-76.62,39.28],zoom:13})).on("error",(function(){alert("Uh oh! Mapbox was unable to load. Please retry or check your connection.")})),o},e.initializeMarkers=function(t){return t.map((function(t){return r=new T.a.Popup({offset:25}),i=t.name.replace(/\s+/g,""),s=[t.location.lng,t.location.lat],r.setHTML('<div tabindex="0"> <p class="popup-text">'.concat(t.name,'</p>\n        <p class="popup-text">').concat(t.location.formattedAddress[0],'</p>\n        <p class="popup-text">').concat(t.location.formattedAddress[1],"</p></div>")),e.createMarker(s,r,i)}))},e.createMarker=function(t,a,r){(n=new T.a.Marker({color:"#40798C"}).setLngLat(t).setPopup(a).addTo(o)).getElement().classList.add("".concat(r)),n.getElement().data=r,n.getElement().addEventListener("focus",(function(){n.togglePopup()})),n.getElement().addEventListener("click",e.animateMarker),n.getElement().setAttribute("tabindex",0)},e.animateMarker=function(e){N[0]!==e.currentTarget?(N.push(e.currentTarget),N[0].classList.remove("animateMarker"),N[0].classList.remove("changeColor"),N.splice(0,1,e.currentTarget),e.currentTarget.classList.toggle("animateMarker"),e.currentTarget.classList.toggle("changeColor")):(e.currentTarget.classList.toggle("animateMarker"),e.currentTarget.classList.toggle("changeColor"))},e.openPopup=function(e){e.togglePopup()},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.initializeMap()}},{key:"render",value:function(){return l.a.createElement("div",{className:"app",id:"map"},l.a.createElement(j,{venues:this.state.venues,error:this.state.error,initializeMarkers:this.initializeMarkers,updateMarkers:this.updateMarkers,clearMarkers:this.clearMarkers,markers:this.state.markers}),l.a.createElement(v,{initializeMap:this.initializeMap,initializeMarkers:this.initializeMarkers}))}}]),a}(c.Component);p.a.render(l.a.createElement(P,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.cbc16e6f.chunk.js.map