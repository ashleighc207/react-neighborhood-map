(this["webpackJsonpreact-neighborhood-project"]=this["webpackJsonpreact-neighborhood-project"]||[]).push([[0],{23:function(e,t,a){e.exports=a(50)},28:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n,r,s,o,i,c=a(0),u=a.n(c),l=a(20),p=a.n(l),m=a(2),h=a(3),d=a(5),f=a(4),v=(a(28),function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return u.a.createElement("div",{ref:function(t){return e.mapContainer=t},role:"application"})}}]),a}(c.Component)),g=a(6),b=a.n(g),k=a(10),E=a(8),M=a(9),y=a.n(M),x=a(21),w=a.n(x),O=a(22),j=a.n(O).a.create({baseURL:"https://api.foursquare.com/v2",timeout:1e3}),L=(a(48),"ZSPTQF2ZF05OMT3EYKCTCVOTLZ0SOS5CK55HEORQU0VG55NZ"),T="DQJT5J4TFN3MBG2FK1SPDUVZL5IPM2RMOWETL3FQWGGXJQLH",N=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={query:"",results:[],venues:[],markers:[],error:!1},e.newSearch=function(t){e.setState({query:t})},e.loadVenueData=function(){var t=Object(E.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.get("/venues/".concat(a,"?client_id=").concat(L,"&client_secret=").concat(T,"&v=20180323"));case 3:200===(n=t.sent).status?(n.data.response.venue.bestPhoto||(n.data.response.venue.bestPhoto={prefix:"https://www.kiabrisa.com.br/wp-content/uploads/revslider/home5/placeholder-1200x500-",suffix:".png",width:100,height:100}),e.setState({venues:[].concat(Object(k.a)(e.state.venues),[n.data.response.venue]),results:[].concat(Object(k.a)(e.state.results),[n.data.response.venue])},(function(){e.props.initializeMarkers([n.data.response.venue])}))):e.setState({error:!0}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn("Get Venue Data Error: ".concat(t.t0)),e.setState({error:!0});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.getVenueDetails=Object(E.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state.venues.map((function(t){return e.loadVenueData(t.id),t}));case 1:case"end":return t.stop()}}),t)}))),e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({venues:this.props.venues},(function(){e.getVenueDetails()}))}},{key:"render",value:function(){var e,t,a=this,n=this.state,r=n.query,s=n.results,o=n.markers,i=n.error;if(r){var c=new RegExp(y()(r),"i");e=s.filter((function(e){return c.test(e.name)}));var l=new RegExp(y()(r),"i");t=o.filter((function(e){return l.test(e._element.data)?e._element.classList.remove("display-none"):e._element.classList.add("display-none"),t}))}else e=s,t=o,this.state.markers.forEach((function(e){e._element.classList.remove("display-none")}));return e.sort(w()("name")),u.a.createElement("aside",{className:"sidebar-container"},u.a.createElement("input",{type:"text",id:"search",placeholder:"Search by name",className:"sidebar-search","aria-label":"search",value:r,onChange:function(e){return a.newSearch(e.target.value)}}),!i&&e.map((function(e){return u.a.createElement("section",{className:"venue-box",key:e.id},u.a.createElement("h2",{className:"venue-name",tabIndex:"0"},e.name),u.a.createElement("section",{className:"venue-sub-box"},u.a.createElement("img",{className:"venue-img",alt:e.name,src:e.bestPhoto.prefix+e.bestPhoto.width+"x"+e.bestPhoto.height+e.bestPhoto.suffix}),u.a.createElement("ul",{className:"venue-list"},u.a.createElement("li",{className:"venue-text"},e.categories[0].name),u.a.createElement("li",{className:"venue-text"},e.location.formattedAddress[0]),u.a.createElement("li",{className:"venue-text"},e.location.formattedAddress[1]))))})),i&&u.a.createElement("p",{className:"error-text"},"Oh no! There was an error getting the requested data from FourSquare. Please try again or report this error via the"," ",u.a.createElement("a",{href:"https://github.com/ashleighc207/react-neighborhood-map/issues"},"Github\xa0Repo.")))}}]),a}(c.Component),P=(a(49),[{id:"506a42efe4b03667d394e0e0"},{id:"4b041d71f964a520745122e3"}]),z=a(7),S=a.n(z),C=[];S.a.accessToken="pk.eyJ1IjoiYXNobGVpZ2hjMjA3IiwiYSI6ImNqa3dod254cjByOGUzcHBkbmpmendyN2EifQ.RzeAqtiFyTg92mZO5Y2XoA";var A=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var c=arguments.length,u=new Array(c),l=0;l<c;l++)u[l]=arguments[l];return(e=t.call.apply(t,[this].concat(u))).state={pizzaPlaces:P,venues:P,markers:[],error:!1},e.initializeMap=function(){return(o=new S.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v9",center:[-76.62,39.28],zoom:13})).on("error",(function(){alert("Uh oh! Mapbox was unable to load. Please retry or check your connection.")})),o},e.initializeMarkers=function(t){return t.map((function(t){return r=new S.a.Popup({offset:25}),i=t.name.replace(/\s+/g,""),s=[t.location.lng,t.location.lat],r.setHTML('<div tabindex="0"> <p class="popup-text">'.concat(t.name,'</p>\n        <p class="popup-text">').concat(t.location.formattedAddress[0],'</p>\n        <p class="popup-text">').concat(t.location.formattedAddress[1],"</p></div>")),e.createMarker(s,r,i)}))},e.createMarker=function(t,a,r){(n=new S.a.Marker({color:"#40798C"}).setLngLat(t).setPopup(a).addTo(o)).getElement().classList.add("".concat(r)),n.getElement().data=r,n.getElement().addEventListener("focus",(function(){n.togglePopup()})),n.getElement().addEventListener("click",e.animateMarker),n.getElement().setAttribute("tabindex",0)},e.animateMarker=function(e){C[0]!==e.currentTarget?(C.push(e.currentTarget),C[0].classList.remove("animateMarker"),C[0].classList.remove("changeColor"),C.splice(0,1,e.currentTarget),e.currentTarget.classList.toggle("animateMarker"),e.currentTarget.classList.toggle("changeColor")):(e.currentTarget.classList.toggle("animateMarker"),e.currentTarget.classList.toggle("changeColor"))},e.openPopup=function(e){e.togglePopup()},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.initializeMap()}},{key:"render",value:function(){return u.a.createElement("div",{className:"app",id:"map"},u.a.createElement(N,{venues:this.state.venues,error:this.state.error,initializeMarkers:this.initializeMarkers,updateMarkers:this.updateMarkers,clearMarkers:this.clearMarkers,markers:this.state.markers}),u.a.createElement(v,{initializeMap:this.initializeMap,initializeMarkers:this.initializeMarkers}))}}]),a}(c.Component);p.a.render(u.a.createElement(A,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.43f5781d.chunk.js.map