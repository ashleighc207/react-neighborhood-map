(this["webpackJsonpreact-neighborhood-project"]=this["webpackJsonpreact-neighborhood-project"]||[]).push([[0],{13:function(e,t,n){e.exports=n(19)},19:function(e,t,n){"use strict";n.r(t);var a,r,o,i,s,c=n(0),l=n.n(c),u=n(11),p=n.n(u),h=n(1),m=n(2),d=n(4),f=n(3),v=(n(6),function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{ref:function(t){return e.mapContainer=t},role:"application"})}}]),n}(c.Component)),g=n(9),b=n(7),k=n.n(b),w=n(12),E=n.n(w),y="ZSPTQF2ZF05OMT3EYKCTCVOTLZ0SOS5CK55HEORQU0VG55NZ",M="DQJT5J4TFN3MBG2FK1SPDUVZL5IPM2RMOWETL3FQWGGXJQLH",x="https://api.foursquare.com/v2",O=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:"",results:[],venues:[],markers:[],error:!1},e.newSearch=function(t){e.setState({query:t})},e.getVenueDetails=function(){e.state.venues.venues.map((function(t){var n=t.id;fetch("".concat(x,"/venues/").concat(n,"?client_id=").concat(y,"&client_secret=").concat(M,"&v=20180323")).then((function(e){return e.json()})).then((function(t){200===t.meta.code?(t.response.venue.bestPhoto||(t.response.venue.bestPhoto={prefix:"https://www.kiabrisa.com.br/wp-content/uploads/revslider/home5/placeholder-1200x500-",suffix:".png",width:100,height:100}),e.setState({venues:[].concat(Object(g.a)(e.state.venues),[t.response.venue]),results:[].concat(Object(g.a)(e.state.results),[t.response.venue])},(function(){e.props.initializeMarkers([t.response.venue])}))):e.setState({error:!0})})).catch((function(t){t&&(console.log("error:",t),e.setState({error:!0}))}))}))},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({venues:this.props.venues},(function(){e.getVenueDetails()}))}},{key:"render",value:function(){var e,t,n=this,a=this.state,r=a.query,o=a.results,i=a.markers,s=a.error;if(r){var c=new RegExp(k()(r),"i");e=o.filter((function(e){return c.test(e.name)}));var u=new RegExp(k()(r),"i");t=i.filter((function(e){return u.test(e._element.data)?e._element.classList.remove("display-none"):e._element.classList.add("display-none"),t}))}else e=o,t=i,this.state.markers.forEach((function(e){e._element.classList.remove("display-none")}));return e.sort(E()("name")),l.a.createElement("aside",{className:"sidebar-container"},l.a.createElement("input",{type:"text",id:"search",placeholder:"Search by name",className:"sidebar-search","aria-label":"search",value:r,onChange:function(e){return n.newSearch(e.target.value)}}),!s&&e.map((function(e){return l.a.createElement("section",{className:"venue-box",key:e.id},l.a.createElement("h2",{className:"venue-name",role:"heading",tabIndex:"0"},e.name),l.a.createElement("section",{className:"venue-sub-box"},l.a.createElement("img",{className:"venue-img",alt:e.name,src:e.bestPhoto.prefix+e.bestPhoto.width+"x"+e.bestPhoto.height+e.bestPhoto.suffix}),l.a.createElement("ul",{className:"venue-list"},l.a.createElement("li",{className:"venue-text"},e.categories[0].name),l.a.createElement("li",{className:"venue-text"},e.location.formattedAddress[0]),l.a.createElement("li",{className:"venue-text"},e.location.formattedAddress[1]))))})),s&&l.a.createElement("p",{className:"error-text"},"Oh no! There was an error getting the requested data from FourSquare. Please try again or report this error via the ",l.a.createElement("a",{href:"https://github.com/ashleighc207/react-neighborhood-map/issues"},"Github\xa0Repo.")))}}]),n}(c.Component),j=n(8),L=n(5),T=n.n(L),N=[];T.a.accessToken="pk.eyJ1IjoiYXNobGVpZ2hjMjA3IiwiYSI6ImNqa3dod254cjByOGUzcHBkbmpmendyN2EifQ.RzeAqtiFyTg92mZO5Y2XoA";var P=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(h.a)(this,n);for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).state={pizzaPlaces:j,venues:j,markers:[],error:!1},e.initializeMap=function(){return(i=new T.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v9",center:[-76.62,39.28],zoom:13})).on("error",(function(){alert("Uh oh! Mapbox was unable to load. Please retry or check your connection.")})),i},e.initializeMarkers=function(t){t.map((function(t){r=new T.a.Popup({offset:25}),s=t.name.replace(/\s+/g,""),o=[t.location.lng,t.location.lat],r.setHTML('<div tabindex="0"> <p class="popup-text">'.concat(t.name,'</p> \n        <p class="popup-text">').concat(t.location.formattedAddress[0],'</p> \n        <p class="popup-text">').concat(t.location.formattedAddress[1],"</p></div>")),e.createMarker(o,r,s)}))},e.createMarker=function(t,n,r){(a=new T.a.Marker({color:"#40798C"}).setLngLat(t).setPopup(n).addTo(i)).getElement().classList.add("".concat(r)),a.getElement().data=r,a.getElement().addEventListener("focus",(function(){a.togglePopup()})),a.getElement().addEventListener("click",e.animateMarker),a.getElement().setAttribute("tabindex",0)},e.animateMarker=function(e){N[0]!==e.currentTarget?(N.push(e.currentTarget),N[0].classList.remove("animateMarker"),N[0].classList.remove("changeColor"),N.splice(0,1,e.currentTarget),e.currentTarget.classList.toggle("animateMarker"),e.currentTarget.classList.toggle("changeColor")):(e.currentTarget.classList.toggle("animateMarker"),e.currentTarget.classList.toggle("changeColor"))},e.openPopup=function(e){e.togglePopup()},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.initializeMap()}},{key:"render",value:function(){return l.a.createElement("div",{className:"app",id:"map"},l.a.createElement(O,{venues:this.state.venues,error:this.state.error,initializeMarkers:this.initializeMarkers,updateMarkers:this.updateMarkers,clearMarkers:this.clearMarkers,markers:this.state.markers}),l.a.createElement(v,{initializeMap:this.initializeMap,initializeMarkers:this.initializeMarkers}))}}]),n}(c.Component),S=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function z(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}p.a.render(l.a.createElement(P,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/react-neighborhood-map",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/react-neighborhood-map","/service-worker.js");S?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):z(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):z(e)}))}}()},6:function(e,t,n){},8:function(e){e.exports=JSON.parse('{"venues":[{"id":"506a42efe4b03667d394e0e0"},{"id":"4b041d71f964a520745122e3"}]}')}},[[13,1,2]]]);
//# sourceMappingURL=main.9dcf63b8.chunk.js.map