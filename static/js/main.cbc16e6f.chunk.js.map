{"version":3,"sources":["containers/App/App.js","components/Map/Map.js","components/Sidebar/Sidebar.js","utils/venues.js","index.js"],"names":["marker","popup","latLng","map","venueId","Map","ref","el","mapContainer","role","Component","clientId","clientSecret","api","Sidebar","state","query","results","venues","markers","error","newSearch","setState","getVenueDetails","venue","id","fetch","then","res","json","data","meta","code","response","bestPhoto","prefix","suffix","width","height","props","initializeMarkers","catch","err","console","log","this","showVenues","showMarkers","venueMatch","RegExp","escapeRegExp","filter","test","name","markerMatch","_element","classList","remove","add","forEach","sort","sortBy","className","type","placeholder","aria-label","value","onChange","event","target","key","tabIndex","alt","src","categories","location","formattedAddress","href","selectedMarker","mapboxgl","accessToken","App","pizzaPlaces","initializeMap","container","style","center","zoom","on","alert","Popup","offset","replace","lng","lat","setHTML","createMarker","Marker","color","setLngLat","setPopup","addTo","getElement","addEventListener","togglePopup","animateMarker","setAttribute","currentTarget","push","splice","toggle","openPopup","updateMarkers","clearMarkers","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cbc16e6f.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { Map, Sidebar } from \"../../components\";\nimport \"./App.css\";\nimport { venues } from \"../../utils/venues\";\nimport mapboxgl from \"mapbox-gl/dist/mapbox-gl\";\n\nlet marker,\n  popup,\n  latLng,\n  map,\n  venueId,\n  selectedMarker = [];\n\nmapboxgl.accessToken =\n  \"pk.eyJ1IjoiYXNobGVpZ2hjMjA3IiwiYSI6ImNqa3dod254cjByOGUzcHBkbmpmendyN2EifQ.RzeAqtiFyTg92mZO5Y2XoA\";\n\nclass App extends Component {\n  state = {\n    pizzaPlaces: venues,\n    venues: venues,\n    markers: [],\n    error: false\n  };\n\n  componentDidMount() {\n    this.initializeMap();\n  }\n\n  // Initialize Mapbox Map and handle errors loading the map api\n  initializeMap = () => {\n    map = new mapboxgl.Map({\n      container: \"map\",\n      style: \"mapbox://styles/mapbox/streets-v9\",\n      center: [-76.62, 39.28],\n      zoom: 13\n    });\n\n    map.on(\"error\", () => {\n      alert(\n        \"Uh oh! Mapbox was unable to load. Please retry or check your connection.\"\n      );\n    });\n\n    return map;\n  };\n\n  // Create popups and call createMarker to create the marker with the associated popup\n  initializeMarkers = venues => {\n    return venues.map(venue => {\n      popup = new mapboxgl.Popup({ offset: 25 });\n      venueId = venue.name.replace(/\\s+/g, \"\");\n      latLng = [venue.location.lng, venue.location.lat];\n      popup.setHTML(\n        `<div tabindex=\"0\"> <p class=\"popup-text\">${venue.name}</p>\n        <p class=\"popup-text\">${venue.location.formattedAddress[0]}</p>\n        <p class=\"popup-text\">${venue.location.formattedAddress[1]}</p></div>`\n      );\n      return this.createMarker(latLng, popup, venueId);\n    });\n  };\n\n  // Create Mapbox markers and add correct event listeners\n  createMarker = (latLng, popup, venueId) => {\n    marker = new mapboxgl.Marker({ color: \"#40798C\" })\n      .setLngLat(latLng)\n      .setPopup(popup)\n      .addTo(map);\n    marker.getElement().classList.add(`${venueId}`);\n    marker.getElement().data = venueId;\n    marker.getElement().addEventListener(\"focus\", () => {\n      marker.togglePopup();\n    });\n    marker.getElement().addEventListener(\"click\", this.animateMarker);\n    marker.getElement().setAttribute(\"tabindex\", 0);\n  };\n\n  // Animate the markers on click\n  animateMarker = event => {\n    if (selectedMarker[0] !== event.currentTarget) {\n      selectedMarker.push(event.currentTarget);\n      selectedMarker[0].classList.remove(\"animateMarker\");\n      selectedMarker[0].classList.remove(\"changeColor\");\n      selectedMarker.splice(0, 1, event.currentTarget);\n      event.currentTarget.classList.toggle(\"animateMarker\");\n      event.currentTarget.classList.toggle(\"changeColor\");\n      // event.stopPropagation()\n    } else {\n      event.currentTarget.classList.toggle(\"animateMarker\");\n      event.currentTarget.classList.toggle(\"changeColor\");\n    }\n  };\n\n  openPopup = marker => {\n    marker.togglePopup();\n  };\n\n  render() {\n    return (\n      <div className=\"app\" id=\"map\">\n        <Sidebar\n          venues={this.state.venues}\n          error={this.state.error}\n          initializeMarkers={this.initializeMarkers}\n          updateMarkers={this.updateMarkers}\n          clearMarkers={this.clearMarkers}\n          markers={this.state.markers}\n        />\n\n        <Map\n          initializeMap={this.initializeMap}\n          initializeMarkers={this.initializeMarkers}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React, { Component } from \"react\";\nimport \"./Map.css\";\n\nclass Map extends Component {\n  render() {\n    return <div ref={el => (this.mapContainer = el)} role=\"application\" />;\n  }\n}\n\nexport default Map;\n","import React, { Component } from \"react\";\nimport escapeRegExp from \"escape-string-regexp\";\nimport sortBy from \"sort-by\";\nimport \"./Sidebar.css\";\n\nlet clientId = \"ZSPTQF2ZF05OMT3EYKCTCVOTLZ0SOS5CK55HEORQU0VG55NZ\",\n  clientSecret = \"DQJT5J4TFN3MBG2FK1SPDUVZL5IPM2RMOWETL3FQWGGXJQLH\",\n  api = \"https://api.foursquare.com/v2\";\n\nclass Sidebar extends Component {\n  state = {\n    query: \"\",\n    results: [],\n    venues: [],\n    markers: [],\n    error: false\n  };\n\n  componentDidMount() {\n    this.setState({ venues: this.props.venues }, () => {\n      this.getVenueDetails();\n    });\n  }\n\n  // Listen for change in search bar query\n  newSearch = query => {\n    this.setState({ query });\n  };\n\n  // API call to Foursquare\n  getVenueDetails = () => {\n    this.state.venues.map(venue => {\n      let venueId = venue.id;\n      fetch(\n        `${api}/venues/${venueId}?client_id=${clientId}&client_secret=${clientSecret}&v=20180323`\n      )\n        .then(res => res.json())\n        .then(data => {\n          // Assign a placeholder image when the returned venue does not contain an image\n          if (data.meta.code === 200) {\n            if (!data.response.venue.bestPhoto) {\n              data.response.venue.bestPhoto = {\n                prefix:\n                  \"https://www.kiabrisa.com.br/wp-content/uploads/revslider/home5/placeholder-1200x500-\",\n                suffix: \".png\",\n                width: 100,\n                height: 100\n              };\n            }\n            // Set the venues state to each venue as the details come in and initialize the corresponding markers\n            this.setState(\n              {\n                venues: [...this.state.venues, data.response.venue],\n                results: [...this.state.results, data.response.venue]\n              },\n              () => {\n                this.props.initializeMarkers([data.response.venue]);\n                return;\n              }\n            );\n          } else {\n            this.setState({ error: true });\n          }\n        })\n        .catch(err => {\n          if (err) {\n            console.log(\"error:\", err);\n            this.setState({ error: true });\n          }\n        });\n      return venue;\n    });\n  };\n\n  render() {\n    const { query, results, markers, error } = this.state;\n\n    let showVenues, showMarkers;\n\n    // Filter venue list based on query input\n    if (query) {\n      const venueMatch = new RegExp(escapeRegExp(query), \"i\");\n      showVenues = results.filter(venue => venueMatch.test(venue.name));\n\n      // Filter markers based on query input\n      const markerMatch = new RegExp(escapeRegExp(query), \"i\");\n      showMarkers = markers.filter(marker => {\n        if (!markerMatch.test(marker._element.data)) {\n          marker._element.classList.add(\"display-none\");\n        } else {\n          marker._element.classList.remove(\"display-none\");\n        }\n        return showMarkers;\n      });\n    } else {\n      showVenues = results;\n      showMarkers = markers;\n      this.state.markers.forEach(marker => {\n        marker._element.classList.remove(\"display-none\");\n      });\n    }\n\n    showVenues.sort(sortBy(\"name\"));\n\n    return (\n      <aside className=\"sidebar-container\">\n        <input\n          type=\"text\"\n          id=\"search\"\n          placeholder=\"Search by name\"\n          className=\"sidebar-search\"\n          aria-label=\"search\"\n          value={query}\n          onChange={event => this.newSearch(event.target.value)}\n        />\n        {!error &&\n          showVenues.map(venue => (\n            <section className=\"venue-box\" key={venue.id}>\n              <h2 className=\"venue-name\" tabIndex=\"0\">\n                {venue.name}\n              </h2>\n              <section className=\"venue-sub-box\">\n                <img\n                  className=\"venue-img\"\n                  alt={venue.name}\n                  src={\n                    venue.bestPhoto.prefix +\n                    venue.bestPhoto.width +\n                    \"x\" +\n                    venue.bestPhoto.height +\n                    venue.bestPhoto.suffix\n                  }\n                />\n                <ul className=\"venue-list\">\n                  <li className=\"venue-text\">{venue.categories[0].name}</li>\n                  <li className=\"venue-text\">\n                    {venue.location.formattedAddress[0]}\n                  </li>\n                  <li className=\"venue-text\">\n                    {venue.location.formattedAddress[1]}\n                  </li>\n                </ul>\n              </section>\n            </section>\n          ))}\n        {error && (\n          <p className=\"error-text\">\n            Oh no! There was an error getting the requested data from\n            FourSquare. Please try again or report this error via the{\" \"}\n            <a href=\"https://github.com/ashleighc207/react-neighborhood-map/issues\">\n              Github&nbsp;Repo.\n            </a>\n          </p>\n        )}\n      </aside>\n    );\n  }\n}\n\nexport default Sidebar;\n","export const venues = [\n  {\n    id: \"506a42efe4b03667d394e0e0\"\n  },\n  {\n    id: \"4b041d71f964a520745122e3\"\n  }\n];\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { App } from \"./containers\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}