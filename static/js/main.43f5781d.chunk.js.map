{"version":3,"sources":["containers/App/App.js","components/Map/Map.js","api/yelp.js","components/Sidebar/Sidebar.js","utils/venues.js","index.js"],"names":["marker","popup","latLng","map","venueId","Map","ref","el","mapContainer","role","Component","yelp","axios","create","baseURL","timeout","clientId","clientSecret","Sidebar","state","query","results","venues","markers","error","newSearch","setState","loadVenueData","id","a","get","resp","status","data","response","venue","bestPhoto","prefix","suffix","width","height","props","initializeMarkers","console","warn","getVenueDetails","this","showVenues","showMarkers","venueMatch","RegExp","escapeRegExp","filter","test","name","markerMatch","_element","classList","remove","add","forEach","sort","sortBy","className","type","placeholder","aria-label","value","onChange","event","target","key","tabIndex","alt","src","categories","location","formattedAddress","href","selectedMarker","mapboxgl","accessToken","App","pizzaPlaces","initializeMap","container","style","center","zoom","on","alert","Popup","offset","replace","lng","lat","setHTML","createMarker","Marker","color","setLngLat","setPopup","addTo","getElement","addEventListener","togglePopup","animateMarker","setAttribute","currentTarget","push","splice","toggle","openPopup","updateMarkers","clearMarkers","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.43f5781d.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { Map, Sidebar } from \"../../components\";\nimport \"./App.css\";\nimport { venues } from \"../../utils/venues\";\nimport mapboxgl from \"mapbox-gl/dist/mapbox-gl\";\n\nlet marker,\n  popup,\n  latLng,\n  map,\n  venueId,\n  selectedMarker = [];\n\nmapboxgl.accessToken =\n  \"pk.eyJ1IjoiYXNobGVpZ2hjMjA3IiwiYSI6ImNqa3dod254cjByOGUzcHBkbmpmendyN2EifQ.RzeAqtiFyTg92mZO5Y2XoA\";\n\nclass App extends Component {\n  state = {\n    pizzaPlaces: venues,\n    venues: venues,\n    markers: [],\n    error: false\n  };\n\n  componentDidMount() {\n    this.initializeMap();\n  }\n\n  // Initialize Mapbox Map and handle errors loading the map api\n  initializeMap = () => {\n    map = new mapboxgl.Map({\n      container: \"map\",\n      style: \"mapbox://styles/mapbox/streets-v9\",\n      center: [-76.62, 39.28],\n      zoom: 13\n    });\n\n    map.on(\"error\", () => {\n      alert(\n        \"Uh oh! Mapbox was unable to load. Please retry or check your connection.\"\n      );\n    });\n\n    return map;\n  };\n\n  // Create popups and call createMarker to create the marker with the associated popup\n  initializeMarkers = venues => {\n    return venues.map(venue => {\n      popup = new mapboxgl.Popup({ offset: 25 });\n      venueId = venue.name.replace(/\\s+/g, \"\");\n      latLng = [venue.location.lng, venue.location.lat];\n      popup.setHTML(\n        `<div tabindex=\"0\"> <p class=\"popup-text\">${venue.name}</p>\n        <p class=\"popup-text\">${venue.location.formattedAddress[0]}</p>\n        <p class=\"popup-text\">${venue.location.formattedAddress[1]}</p></div>`\n      );\n      return this.createMarker(latLng, popup, venueId);\n    });\n  };\n\n  // Create Mapbox markers and add correct event listeners\n  createMarker = (latLng, popup, venueId) => {\n    marker = new mapboxgl.Marker({ color: \"#40798C\" })\n      .setLngLat(latLng)\n      .setPopup(popup)\n      .addTo(map);\n    marker.getElement().classList.add(`${venueId}`);\n    marker.getElement().data = venueId;\n    marker.getElement().addEventListener(\"focus\", () => {\n      marker.togglePopup();\n    });\n    marker.getElement().addEventListener(\"click\", this.animateMarker);\n    marker.getElement().setAttribute(\"tabindex\", 0);\n  };\n\n  // Animate the markers on click\n  animateMarker = event => {\n    if (selectedMarker[0] !== event.currentTarget) {\n      selectedMarker.push(event.currentTarget);\n      selectedMarker[0].classList.remove(\"animateMarker\");\n      selectedMarker[0].classList.remove(\"changeColor\");\n      selectedMarker.splice(0, 1, event.currentTarget);\n      event.currentTarget.classList.toggle(\"animateMarker\");\n      event.currentTarget.classList.toggle(\"changeColor\");\n      // event.stopPropagation()\n    } else {\n      event.currentTarget.classList.toggle(\"animateMarker\");\n      event.currentTarget.classList.toggle(\"changeColor\");\n    }\n  };\n\n  openPopup = marker => {\n    marker.togglePopup();\n  };\n\n  render() {\n    return (\n      <div className=\"app\" id=\"map\">\n        <Sidebar\n          venues={this.state.venues}\n          error={this.state.error}\n          initializeMarkers={this.initializeMarkers}\n          updateMarkers={this.updateMarkers}\n          clearMarkers={this.clearMarkers}\n          markers={this.state.markers}\n        />\n\n        <Map\n          initializeMap={this.initializeMap}\n          initializeMarkers={this.initializeMarkers}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React, { Component } from \"react\";\nimport \"./Map.css\";\n\nclass Map extends Component {\n  render() {\n    return <div ref={el => (this.mapContainer = el)} role=\"application\" />;\n  }\n}\n\nexport default Map;\n","import axios from \"axios\";\n\nconst yelp = axios.create({\n  baseURL: \"https://api.foursquare.com/v2\",\n  timeout: 1000\n});\n\nexport default yelp;\n","import React, { Component } from \"react\";\nimport escapeRegExp from \"escape-string-regexp\";\nimport sortBy from \"sort-by\";\nimport yelp from \"../../api/yelp\";\nimport \"./Sidebar.css\";\n\nconst clientId = \"ZSPTQF2ZF05OMT3EYKCTCVOTLZ0SOS5CK55HEORQU0VG55NZ\";\nconst clientSecret = \"DQJT5J4TFN3MBG2FK1SPDUVZL5IPM2RMOWETL3FQWGGXJQLH\";\n\nclass Sidebar extends Component {\n  state = {\n    query: \"\",\n    results: [],\n    venues: [],\n    markers: [],\n    error: false\n  };\n\n  componentDidMount() {\n    this.setState({ venues: this.props.venues }, () => {\n      this.getVenueDetails();\n    });\n  }\n\n  // Listen for change in search bar query\n  newSearch = query => {\n    this.setState({ query });\n  };\n\n  loadVenueData = async id => {\n    try {\n      let resp = await yelp.get(\n        `/venues/${id}?client_id=${clientId}&client_secret=${clientSecret}&v=20180323`\n      );\n      if (resp.status === 200) {\n        if (!resp.data.response.venue.bestPhoto) {\n          resp.data.response.venue.bestPhoto = {\n            prefix:\n              \"https://www.kiabrisa.com.br/wp-content/uploads/revslider/home5/placeholder-1200x500-\",\n            suffix: \".png\",\n            width: 100,\n            height: 100\n          };\n        }\n        // Set the venues state to each venue as the details come in and initialize the corresponding markers\n        this.setState(\n          {\n            venues: [...this.state.venues, resp.data.response.venue],\n            results: [...this.state.results, resp.data.response.venue]\n          },\n          () => {\n            this.props.initializeMarkers([resp.data.response.venue]);\n            return;\n          }\n        );\n      } else {\n        this.setState({ error: true });\n      }\n    } catch (err) {\n      console.warn(`Get Venue Data Error: ${err}`);\n      this.setState({ error: true });\n    }\n  };\n\n  // API call to Foursquare\n  getVenueDetails = async () => {\n    this.state.venues.map(venue => {\n      this.loadVenueData(venue.id);\n      return venue;\n    });\n  };\n\n  render() {\n    const { query, results, markers, error } = this.state;\n\n    let showVenues, showMarkers;\n\n    // Filter venue list based on query input\n    if (query) {\n      const venueMatch = new RegExp(escapeRegExp(query), \"i\");\n      showVenues = results.filter(venue => venueMatch.test(venue.name));\n\n      // Filter markers based on query input\n      const markerMatch = new RegExp(escapeRegExp(query), \"i\");\n      showMarkers = markers.filter(marker => {\n        if (!markerMatch.test(marker._element.data)) {\n          marker._element.classList.add(\"display-none\");\n        } else {\n          marker._element.classList.remove(\"display-none\");\n        }\n        return showMarkers;\n      });\n    } else {\n      showVenues = results;\n      showMarkers = markers;\n      this.state.markers.forEach(marker => {\n        marker._element.classList.remove(\"display-none\");\n      });\n    }\n\n    showVenues.sort(sortBy(\"name\"));\n\n    return (\n      <aside className=\"sidebar-container\">\n        <input\n          type=\"text\"\n          id=\"search\"\n          placeholder=\"Search by name\"\n          className=\"sidebar-search\"\n          aria-label=\"search\"\n          value={query}\n          onChange={event => this.newSearch(event.target.value)}\n        />\n        {!error &&\n          showVenues.map(venue => (\n            <section className=\"venue-box\" key={venue.id}>\n              <h2 className=\"venue-name\" tabIndex=\"0\">\n                {venue.name}\n              </h2>\n              <section className=\"venue-sub-box\">\n                <img\n                  className=\"venue-img\"\n                  alt={venue.name}\n                  src={\n                    venue.bestPhoto.prefix +\n                    venue.bestPhoto.width +\n                    \"x\" +\n                    venue.bestPhoto.height +\n                    venue.bestPhoto.suffix\n                  }\n                />\n                <ul className=\"venue-list\">\n                  <li className=\"venue-text\">{venue.categories[0].name}</li>\n                  <li className=\"venue-text\">\n                    {venue.location.formattedAddress[0]}\n                  </li>\n                  <li className=\"venue-text\">\n                    {venue.location.formattedAddress[1]}\n                  </li>\n                </ul>\n              </section>\n            </section>\n          ))}\n        {error && (\n          <p className=\"error-text\">\n            Oh no! There was an error getting the requested data from\n            FourSquare. Please try again or report this error via the{\" \"}\n            <a href=\"https://github.com/ashleighc207/react-neighborhood-map/issues\">\n              Github&nbsp;Repo.\n            </a>\n          </p>\n        )}\n      </aside>\n    );\n  }\n}\n\nexport default Sidebar;\n","export const venues = [\n  {\n    id: \"506a42efe4b03667d394e0e0\"\n  },\n  {\n    id: \"4b041d71f964a520745122e3\"\n  }\n];\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { App } from \"./containers\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}